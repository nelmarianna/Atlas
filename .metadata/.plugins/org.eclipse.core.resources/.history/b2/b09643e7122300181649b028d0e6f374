package cloudsim.ext.datacenter;

import java.util.Map;

public class WeightedRoundRobinVMLoadBalancer extends VmLoadBalancer {
	
	private Map<Integer, VirtualMachineState> vmStatesList;
	private int currVm = 0;
	private int[] vmWeight = {1,1,2,3,3};
	
	
	public WeightedRoundRobinVMLoadBalancer(Map<Integer, VirtualMachineState> vmStatesList){
		super();
		
		this.vmStatesList = vmStatesList;
	}
	
	
	
	
	/* (non-Javadoc)
	 * @see cloudsim.ext.VMLoadBalancer#getVM()
	 */
	public int getNextAvailableVm(){
		
		if(vmWeight[currVm]<1){
			currVm++;
		}
		if (currVm >= vmStatesList.size()){
			currVm = 0;
		}
		
		allocatedVm(currVm);
		vmWeight[currVm]--;
		return currVm;
		
	}
}
